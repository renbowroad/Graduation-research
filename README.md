# Graduation-research

## ユーザの首振り時におけるVR環境の動的なレンダリング

### 研究の背景
現在，バーチャルリアリティ（以下，VR）はエンターテイメント分野だけではなく，教育や観光事業など幅広い分野での利用がされ始めているため，ユーザがVRコンテンツに触れる機会が増えている．しかし，こういったコンテンツは，VR酔いと言われる頭痛，蒼白，胃の膨張感，倦怠感，吐き気などを引き起こす問題が生じやすいことが知られている．また，VR酔いは動揺病とも言われており，いわゆる乗り物酔いや映像酔いなどの症状に似ている．
  この解決策としてユーザの視野（field-of-view：以下，FOV）をコンテンツの内容に応じて動的に変化させる技術[1]やユーザの視線位置を考慮した焦点付きFOV技術[2]などがある．
  しかし，ユーザの健康状態によってVR酔いは個人差があることがわかっているが，ユーザの生理指標値を用いた動的なレンダリングが確立されていないことや，上記で述べたようなレンダリング方法だとコンテンツの内容に依存するため，人によっては酔いを感じていないタイミングでの視野角制限をされてしまい，十分にコンテンツを楽しめない可能性が生じてしまったり，周辺を見渡そうと頭を回転させる回数が増え，不快感やVR酔いにつながりやすい．実際，VR酔いはVR普及における大きな障壁となっている．
  そこで本研究では，コンテンツ依存でなく，ユーザの首振り時における動的なレンダリングによって視野角を変動させるVR的当てゲームを開発した． 

### 研究の目的
今回の研究では，ユーザの首振り時におけるFOVの動的なレンダリングによるVR酔いの軽減を図ることを目的とする．首振り時での動的なレンダリングを行うことで，ユーザがVR体験中に酔うような動きに合わせた視野角制限ができること，またそうする事で視野角制限に対する不快感の軽減の両立ができると考えたためである．
  また，先行研究においてVR酔いを客観的に判断する上での生理指標値として，重心動揺および視線（特に眼振）が有力とされていたためこの２つを利用する．さらにVR酔いの主観的な評価として，先行研究でよく利用されているSimulator Sickness Questionnaire[3]（以下，SSQ）と呼ばれるアンケートを利用する．

### 研究の概要
本研究では，VR酔いの主観的な評価としてSSQを、客観的な評価として重心動揺、視線情報の生理指標値を用いる. また、動的なレンダリングの方法は Fernandes ら[1]とAdhanom ら[2]の手法を参考にして、FOVが動的に変化するシステムを提案する．FOVの動的変化は，ユーザの首振り時におけるヨー，ピッチの動きの変動に対応させる．ヨーとは3次元ベクトルにおけるz軸を中心とした回転のことであり，ピッチとは3次元ベクトルにおけるy軸を中心とした回転のことである．

<img width="165" alt="image" src="https://user-images.githubusercontent.com/105656864/168704326-3fd7c53f-9119-45dd-be7a-610924c820f0.png">



### 開発環境
今回の実験では，主にUnityとOculus Quest2を用いてMacBook Proで開発を行うので，パソコンにUnityの開発環境を設定[11]する.また，UnityとOculus Quest2を対応づけするための設定[12]も行う必要がある．さらに重心動揺を測定するためには，WiiBoardとMacBook Proの対応づけ[12]も必要となる．










<img width="222" alt="image" src="https://user-images.githubusercontent.com/105656864/168704419-6530a8a5-f3ed-4110-a396-f042e707655b.png">



### Unityで作成したコンテンツ
以下に今回の実験で作成し，ユーザに行ってもらったタスクのコンテンツを示す．コンテンツの作成は主に，(i)スタートシーン，(ii)シューティングシーン，(iii)エンドシーンの3つに分けて作成をした．
  また，コンテンツ作成に使用したAssetは，ClusterCreatorKitTemplateとRPG_FPS_game_assets_industrialを使用している．
  
  <img width="425" alt="image" src="https://user-images.githubusercontent.com/105656864/168704490-98858471-9843-4bd1-9619-b85832c60544.png">
<img width="425" alt="image" src="https://user-images.githubusercontent.com/105656864/168704499-44f60beb-6ff6-4ab7-a8bf-dd822bd67a88.png">
<img width="425" alt="image" src="https://user-images.githubusercontent.com/105656864/168704503-fd4cd386-abbe-4662-92e9-2572f0ad4a38.png">



### 実験環境
実験参加者はOculus Quest2を装着し，WiiBoardに乗った立位で実験を行った．また，
MacBook ProとOculus Quest2はType-Cケーブルで接続し，各実験終了後，Unityで視
野角制限の更新を行い，apkファイルをOculus Quest2に転送している．また操作はOculus 
Touchコントローラを使用している．

### 視野角の制限
動的な視野角制限に用いるエフェクトはVR Tunnelling Pro[13]を使用した．トンネリング
によって視野角を狭めVR酔いを軽減するシステムである．
  続いて，視野角に関して説明をする．最大視野角はOculusQuest 2の水平視野角である94°であり，3種類の視野角変化量は，最大角速度に達した時に最小視野角50°，65°，80°に設定した．最小視野角の際のユーザの視点を図7に示す．50°はGoogle Earth VR などの人気なVRコンテンツで使用される視野角である[14]． 80°はVR体験が損なわれたと感じる最大視野角である[1]．65°はこれらの中間値として設定している．参加者は全ての視野角条件を体験し，条件の割り当てに関しては，ラテン方格法を用いた．
  
<img width="453" alt="image" src="https://user-images.githubusercontent.com/105656864/168704543-cf2411c5-6f10-404f-a79f-242e9de17461.png">



### 実験手順
実験参加者の体調が良好であることを確認し，さらにVR酔いによる不快感や気持ち悪
さが生じた場合には，任意のタイミングでタスクを中断してもらうことを説明した．続いてHMDを装着してもらい，行ってもらうタスクの説明や操作方法などを説明した．実験開始と同時にProcessingの実行ボタンを押し重心動揺の測定も行った，
2分間のタスクが終了後，HMDを外しGoogleフォームで作成したSSQに回答をしてもらい，VR酔いの症状が続いていないことを口頭で確認し，FOVを変えた条件下で実験を行なった．


### 結論
本研究では，動的なレンダリングを使用するための VR ゲームを開発し，ユーザの首振り
時における FOV の動的なレンダリングが与える VR 酔いの調査を行った.実験参加者は男 性の割合が多く，また年齢も 20 代がほとんどではあったが，VR 酔いの症状が見られ.重 軽度も様々であった.実験の結果としては，主観的評価である SSQ のスコアがユーザの過 去の VR 経験の有無や条件の割り当て方に依存してしまっている部分もあり，VR 酔いの評 価は難しかった.また，客観的評価として利用した視線に関しては，実験デザインの関係も あり，比較的緩い条件下での計測となってしまったため，よりユーザの視線に近いデータを 取る必要性がある.重心動揺に関しては，比較的仮説を支持する形となり，VR 酔いを評価 する上で有効であることがわかった.ターゲット数に関しては，考察でも述べたとおり，1 回目の実験と 2 回目以降の実験が対等に行われる必要があるため，口頭での説明ではなく， 実際にシミュレーションのための時間を設ける必要があると感じた.また，以上 3 つの客 観的指標と主観的指標の SSQ スコアを合わせて結果を比較することで，本実験結果から 94°から 80°もしくは 94°から 65°での首振り時における視野角制限であれば，ユーザ の VR 体験を阻害することなく(不快感を与えることなく)，VR 酔いを軽減することがで きる可能性があると結論できた.
